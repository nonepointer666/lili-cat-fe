{"version":3,"file":"index.js","sources":["pages/chat/index.uvue","pages/chat/index.uvue?type=page"],"sourcesContent":["<template>\n  <view class=\"chat-container\">\n    <!-- 聊天记录 -->\n    <scroll-view class=\"chat-list\" scroll-y=\"true\">\n      <view v-for=\"(item, index) in chatList\" :key=\"index\" class=\"chat-item\">\n        <view :class=\"['chat-bubble', item.role === 'user' ? 'user-bubble' : 'bot-bubble']\">\n          <text>{{ item.content }}</text>\n          <view v-if=\"item.role === 'bot' && item.thinking\" class=\"thinking\">\n            <text>思考中...</text>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n\n    <!-- 输入框 -->\n    <view class=\"input-container\">\n      <input\n        v-model=\"inputMessage\"\n        class=\"input-box\"\n        placeholder=\"请输入消息\"\n        @confirm=\"sendMessage\"\n      />\n      <button class=\"send-button\" @click=\"sendMessage\">发送</button>\n    </view>\n  </view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n  data() {\n    return {\n      inputMessage: \"\", // 用户输入的消息\n      chatList: [] // 聊天记录\n    };\n  },\n  methods: {\n    // 发送消息\n    sendMessage() {\n      if (!this.inputMessage.trim()) {\n        uni.showToast({\n          title: \"消息不能为空\",\n          icon: \"none\"\n        });\n        return;\n      }\n\n      // 将用户消息添加到聊天记录\n      this.chatList.push({ role: \"user\", content: this.inputMessage });\n      this.inputMessage = \"\"; // 清空输入框\n\n      // 添加“思考中...”状态\n      this.chatList.push({ role: \"bot\", content: \"\", thinking: true });\n\n      // 调用接口获取回复\n      this.getBotReply();\n    },\n\n    // 调用接口获取回复\n    async getBotReply() {\n      try {\n        const response = await uni.request({\n          url: \"http://47.103.73.26/api/chat\", // 替换为你的接口地址\n          method: \"POST\",\n          data: {\n            content: this.chatList[this.chatList.length - 2].content // 发送最后一条用户消息\n          }\n        });\n\n        if (response.statusCode === 200) {\n          // 假设接口返回的数据在 response.data 中\n          const botMessage = response.data.choices[0]?.message.content || \"我不知道该说什么\";\n\n          // 更新“思考中...”状态为实际回复\n          this.chatList[this.chatList.length - 1] = {\n            role: \"bot\",\n            content: botMessage,\n            thinking: false\n          };\n        } else {\n          this.chatList[this.chatList.length - 1] = {\n            role: \"bot\",\n            content: \"请求失败，请重试\",\n            thinking: false\n          };\n        }\n      } catch (error) {\n        this.chatList[this.chatList.length - 1] = {\n          role: \"bot\",\n          content: \"网络错误，请检查网络连接\",\n          thinking: false\n        };\n        uni.__f__('error','at pages/chat/index.uvue:92',\"请求失败：\", error);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  padding: 10px;\n  background-color: #f5f5f5;\n}\n\n.chat-list {\n  flex: 1;\n  overflow-y: auto;\n  margin-bottom: 10px;\n}\n\n.chat-item {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 10px;\n}\n\n.chat-bubble {\n  max-width: 70%;\n  padding: 10px;\n  border-radius: 10px;\n  position: relative;\n}\n\n.user-bubble {\n  align-self: flex-end;\n  background-color: #007aff;\n  color: #fff;\n}\n\n.bot-bubble {\n  align-self: flex-start;\n  background-color: #fff;\n  color: #333;\n  border: 1px solid #ddd;\n}\n\n.thinking {\n  font-size: 12px;\n  color: #999;\n  margin-top: 5px;\n}\n\n.input-container {\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  background-color: #fff;\n  border-top: 1px solid #ddd;\n}\n\n.input-box {\n  flex: 1;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  margin-right: 10px;\n}\n\n.send-button {\n  padding: 10px 20px;\n  background-color: #007aff;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n}\n</style>","import MiniProgramPage from '/Users/edy/Documents/HBuilderProjects/lilicat-web/pages/chat/index.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AA4BA,MAAA,YAAeA,8BAAA;AAAA,EACb,OAAI;AACF,WAAO;AAAA,MACL,cAAc;AAAA,MACd,UAAU,CAAG;AAAA;AAAA;EAEhB;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,cAAW;AACT,UAAI,CAAC,KAAK,aAAa,QAAQ;AAC7BC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAA;AACD,eAAM;AAAA,MACR;AAGA,WAAK,SAAS,KAAK,EAAE,MAAM,QAAQ,SAAS,KAAK,aAAa,CAAC;AAC/D,WAAK,eAAe;AAGpB,WAAK,SAAS,KAAK,EAAE,MAAM,OAAO,SAAS,IAAI,UAAU,KAAK,CAAC;AAG/D,WAAK,YAAW;AAAA,IACjB;AAAA;AAAA,IAGK,cAAW;;;AACf,YAAI;AACF,gBAAM,WAAW,MAAMA,cAAG,MAAC,QAAQ;AAAA,YACjC,KAAK;AAAA,YACL,QAAQ;AAAA,YACR,MAAM,IAAA,cAAA;AAAA,cACJ,SAAS,KAAK,SAAS,KAAK,SAAS,SAAS,CAAC,EAAE;AAAA;AAAA,aACnD;AAAA,UACD,CAAA;AAED,cAAI,SAAS,eAAe,KAAK;AAE/B,kBAAM,oBAAa,SAAS,KAAK,QAAQ,CAAC,OAAG,QAAA,OAAA,SAAA,SAAA,GAAA,QAAQ,YAAW;AAGhE,iBAAK,SAAS,KAAK,SAAS,SAAS,CAAC,IAAI;AAAA,cACxC,MAAM;AAAA,cACN,SAAS;AAAA,cACT,UAAU;AAAA;UAEZ,OAAK;AACL,iBAAK,SAAS,KAAK,SAAS,SAAS,CAAC,IAAI;AAAA,cACxC,MAAM;AAAA,cACN,SAAS;AAAA,cACT,UAAU;AAAA;UAEd;AAAA,QACA,SAAO,OAAO;AACd,eAAK,SAAS,KAAK,SAAS,SAAS,CAAC,IAAI;AAAA,YACxC,MAAM;AAAA,YACN,SAAS;AAAA,YACT,UAAU;AAAA;AAEZA,wBAAG,MAAC,MAAM,SAAQ,+BAA8B,SAAS,KAAK;AAAA,QAChE;AAAA;IACF;AAAA,EACF;CACD;;;;;;;;;;;;;;;;;;;;AC9FD,GAAG,WAAW,eAAe;"}